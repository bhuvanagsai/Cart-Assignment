(()=>{"use strict";class e{constructor(e,t,n,i,a,s){var r,d;d=function(){return`\n            <div class = 'card-container'>\n            <div class = "discount">${this.discount}%</div>\n            <div  class = 'image-container'>\n            <img src ="./images/${this.image}">\n            </div>\n            <div class = "productDetailsContainer">\n            <div class = "product-name">${this.name}</div>\n            <div class = "detailsContainer">\n                <span style='color:red;text-decoration:line-through'>\n                <span style='color:black'>${this.displayPrize}</span>\n                </span>\n                <span>${this.actualPrize}</span>\n                <button class = "addToCart" id = '${this.id}'>Add to Cart</button>\n            </div>\n            </div>\n        </div>\n        `},(r="render")in this?Object.defineProperty(this,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):this[r]=d,this.id=e,this.actualPrize=i,this.displayPrize=a,this.name=t,this.image=n,this.discount=s}}class t{constructor(e,t){var n,i;i=function(){return`\n            <div class = "item-Card" id = '${this.id}' >\n            <div class = "item-Container">\n            <div class = "img-Container">\n                <img src ="./images/${this.image}">\n            </div>\n            <span class = "item-name">${this.name}</span>\n            </div>\n            <div class = "IncDecContainer">\n                <button class = "addBtn" onclick = "addQuantity(this,'${this.itemId}')">+</button>\n                <div class = "quantity">1</div>\n                <button class = "minusBtn" onclick = "removeQuantity('${this.id}','${this.itemId}')">-</button>\n            </div>\n            <div class = "price">${this.actualPrize}</div>\n            </div>\n        `},(n="render")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this.id=t,this.itemId=e.id,this.actualPrize=e.actualPrize,this.displayPrize=e.displayPrize,this.name=e.name,this.image=e.image,this.discount=e.discount}}let n={},i={},a=0,s=0;function r(e){e.innerText="Items("+document.querySelectorAll(".item-Card").length+")"}function d(e,t,n){"add"==n||"initial"==n?(s+=e,a+=t):"sub"==n&&(s-=e,a-=t),document.getElementsByClassName("orderTotal")[0].innerHTML="$"+s,document.getElementsByClassName("displayedPrice")[0].innerHTML="$"+a,document.getElementsByClassName("discountAmount")[0].innerHTML="$"+(a-s)}window.onload=function(){fetch("./JsonData/cartData.json").then((e=>e.json())).then((a=>{!function(a){const s=document.querySelector(".itemsContainer");a.items.map((t=>{let i;i=Math.round((parseInt(t.price.display)-parseInt(t.price.actual))/parseInt(t.price.display)*100),n[t.id]=new e(t.id,t.name,t.image,t.price.actual,t.price.display,i),s.insertAdjacentHTML("beforeend",n[t.id].render())})),document.querySelectorAll(".addToCart").forEach((e=>{e.addEventListener("click",(e=>{let a=document.querySelector(".message");a.style.display="block",setTimeout((function(){a.style.display="none"}),1e3),e.target.innerHTML="Added",e.target.disabled=!0,document.getElementsByClassName("no-items").length&&document.getElementsByClassName("no-items")[0].remove(),document.querySelector(".AmountCalcContainer").style.display="block";let s=e.target.getAttribute("id");!function(e){const n=document.querySelector(".cartList"),a=document.querySelectorAll(".item-Card").length;i[e.id]=new t(e,a),n.insertAdjacentHTML("beforeend",i[e.id].render()),d(i[e.id].actualPrize,i[e.id].displayPrize,"initial"),r(document.querySelector(".items"))}(n[s])}))}))}(a)}))},window.addQuantity=function(e,t){let i=e.closest(".item-Card"),a=i.querySelector(".quantity");a.innerText=parseInt(a.innerText)+1,i.querySelector(".price").innerText=parseInt(n[t].actualPrize)*a.innerText,d(parseInt(n[t].actualPrize),parseInt(n[t].displayPrize),"add")},window.removeQuantity=function(e,t){let c=document.querySelector('.item-Card[id="'+e+'"]'),o=c.querySelector(".quantity");if(d(parseInt(i[t].actualPrize),parseInt(i[t].displayPrize),"sub"),parseInt(o.innerText)-1==0){c.remove(),r(document.querySelector(".items"));let e=document.querySelector('.addToCart[id="'+t+'"]');e.innerText="Add to Cart",e.disabled=!1}""==document.querySelector(".cartList").innerText&&(document.querySelector(".cartList").innerHTML='<div class = "no-items">No Items added</div>',document.querySelector(".AmountCalcContainer").style.display="none",s=0,a=0),o.innerText=parseInt(o.innerText)-1;let l=c.querySelector(".price");l.innerText=parseInt(l.innerText)-parseInt(n[t].actualPrize)}})();